# 세션 유지 방법

- 일반적으로 내장 톰캣에 메모리를 저장하게 되면 아래와 같은 문제 발생
  - 내장 톰캣 이용시, 어플리 케이션 실행시 항상 초기화 됨
    - 배포할때마다 톰캣이 재시작
  - 톰캣마다 세션 동기화 설정 필요
    - 2대 이상의 서버에서 서비스 할 경우 문제 발생
- 해결방안
  - 톰캣 세션 사용
    - 기본 방식
    - 단, 2대 이상의 WAS가 구동되는 환경에서는 톰캣들 간의 세션 공유를 위한 추가 설정 필요
  - MySQL같은 데이터베이스를 세션 저장소로 사용
    - 여러 WAS 간의 공용 세션을 사용하는 가장 쉬운 방법
    - 많은 설정이 필요 없음
    - 로그인 요청이 많이 없는 백오피스, 사내시스템용도에서 사용
    - **로그인 요청마다 DB IO가 발생하여 성능상 이슈 발생**
  - Redis, Memcached 같은 메모리DB를 세션 저장소로 사용
    - B2C 서비스에서 많이 사용
    - **실제 서비스**로 사용하기 위해서는 Embedded Redis 같은 방식이 아닌 **외부 메모리 서버 필요**
    - 엘라스틱캐시 같은 서비스 있음
    - 이용자가 많아진다면 적합