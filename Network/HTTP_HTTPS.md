# HTTP HTTPS

> http://www.ktword.co.kr/abbr_view.php?nav=2&m_temp1=648&id=1283
>
> https://www.joinc.co.kr/w/Site/Network_Programing/AdvancedComm/HTTP
>
> https://developer.mozilla.org/ko/docs/Web/HTTP/Overview

## HTTP

> https://shlee0882.tistory.com/110

- 웹상에서 웹 서버 및 웹브라우저 상호 간의 데이터 전송을 위한 응용계층(L7) 프로토콜
- 요청 및 응답의 구조
  - 동작 형태가 **클라이언트 / 서버** 모델로 동작
  - 클라이언트의 **URI**를 이용해서 서버에 접속하고, 데이터 요청
- 메세지 교환 형태의 프로토콜
  - 클라이언트와 서버간에 **HTTP 메세지**를 주고 받으며 통신
  - HTTP의 응답 빛 요청 메시지 구성
  - HTTP메세지 내 헤더 항목들
- 트랜잭션 중심의 **비연결성**프로토콜
  - Connectionless
    - 연결 유지 안함
  - Stateless
    - 이전의 상태 유지 안함
  - 장점
    - **접속 유지는 최소한으로 하기 때문에 불특정 다수를 대상으로하는 서비스에 적함**
  - 단점
    - **클라이언트의 이전 상태를 알 수 없음**
      - 로그인을 해도 로그 정보 유지 불가
      - 쿠키를 이용하여 해결
- 전송 프로토콜 - **TCP**
- 전송 포트 - **80**
- keep alive
  - 클라이언트측에 연결을 유지하라는 신호를 보내기 위해서 사용됨

### URI

- 자원의 **위치**를 알려주는 프로토콜
  - http://www.example.com/index.jsp
    - index.jsp 같은 것

### Method

- GET
- POST
- PUT
- DELETE
- HEAD
- OPTIONS
- TRACE

### 데이터 포맷

> HTTP/2에서는 메시지가 프레임속으로 캡슐화 되어서 인간이 읽을 수 없음

#### 요청

- 시작줄, **헤더(Header)**와 **바디(Body)**로 구성됨
  - 시작줄
    - 요청 방식(메서드), URI, HTTP버전으로 구성됨
    - `GET www.naver.com HTTP/1.1`
  - 헤더
    - 요청에 대한 정보를 담고 있음
  - 바디
    - 요청을 보낼때 함께 보낼 데이터

#### 응답

- 시작줄, 헤더, 바디로 구성됨
  - 시작줄
    - **HTTP버전, 상태코드, 상태메시지**로 구성
  - 헤더
    - 응답에 대한 정보
  - 바디
    - 응답에 대한 메시지 (보통 HTML)

### 응답코드

- `1XX`
  - 조건부 응답

- `2XX`
  - 서버가 요청을 성공적으로 처리했을 경우

- `3XX`
  - 리다이렉션 (redirection)
  - 요청완료를 위해 다른 페이지로 보내야 하는 경우

- `4XX`
  - 클라이언트 요청에 오류가 있을 경우

- `5XX`
  - 서버 오류

### Keep Alive

- HTTP 1.1부터 지원
- 기존의 HTTP에서는 웹페이지 하나를 표시하기 위해 수십번의 연결을 맺고 끊는 과정이 필요함 이러한 점을 극복
  - 처음 연결되면 HTML을 받고 **바로 접속을 끊는것이 아닌, 모두 받고 연결을 끊음**
- Keep Alive 동작시 수행순서
  1. 웹서버 연결
  2. HTML 다운
  3. 이미지, css, js 다운
  4. 모든 문서 다운 되면 연결 종료
- http 요청 헤더에 keep-alive 방식을 지원하도록 명시
  - `Connection:keep-alive`





## HTTPS

- HTTP 보안 버전
  - 기본포트는 443
- 도청, 통신 상대방 위장, 임의 내용 변경 등 방지
- SSL/TLS 등 다른 프로토콜들을 조합시켜 **통신 내용을 암호화** 시킴
  - 안전하긴 하지만 사용자와 서버 간의 트래픽을 암호화하지는 않음
  - SSL은 표현 계층의 프로토콜

- 브라우저나 앱과 인터넷 웹서버 와의 HTTP에 대해서 암호화 해줌

  - 하지만, HTTP에 비해 느림

- 통신을 하며 암호화 키를 서로 안전하게 주고 받고, 키 값이 노출되지 않도록 안전하게 해주는 것이 https 서버 인증서

- SSL 레이어 위에 HTTP를 통과 시키는 방식

  1. 평문의 HTTP문서는 SSL레이어를 통과하며 암호화 됨

  2. 도착한 목적지에서 SSL 레이어를 통과하며 복호화 되서 웹브라우저에 전달