# 함수형 리액티브 프로그래밍 이해하기

> https://itnext.io/demystifying-functional-reactive-programming-67767dbe520b

지난 몇년동안 리액티브 프로그래밍은 많은 관심을 받아오는 중이다. [reactive manifesto](https://www.reactivemanifesto.org/) 는

반응형 소프트웨어 설계에 대해 논의하고 수천번 서명해왔다. 현재 ReactiveX 같은 반응형 라이브러리는 기본적으로 모든 주요한 프로그래밍 언어에 존재한다.

빅데이터와 Spark의 출현으로, 함수형 프로그래밍 역시 꽤 과장된 광고를 경험하고 있다. 더한 혼란을 야기하면서, *functional reactive programming* 은 섞이게 되고 빈번하게 ReactiveX 같은 반응형 라이브러리를 설명하는데사용된다.

이 아티클에서는 모든 유행어에 대해 다룰 것이다. 즉 함수형 프로그래밍, 반응형 프로그래밍, 함수형 리액티브 프로그래밍이 무엇인지, 어떻게 서로 관련이 있고 왜 알아야 하는지?

*(스칼라 스티펫를 이용하여 개념을 설명을 할 예정이다. 스칼라를 잘 몰라도 쉽게 따라올 수 있도록 간단하게 사용할 것이다.)*



## 함수형 프로그래밍

함수형 프로그래밍은 모두 함수에 관한 것이다. 음, 사실 이건 모두 pure 함수에 대한것이다.

Pure 함수는 어떠한 사이드 이펙트도 없는 함수이다. 다른 말로 하자면, 이것은 데이터 베이스에 작성할 수 없다. 이것은 이것의 스코프 밖에서 어떠한 값도 변경할 수 없고, 어떠한 것도 출력할 수 없다.

이건 아주 중요한 결과이다. Pure 함수는 항상 무언가를 리턴해야 한다. 어떠한 상태도 변경하지 않고 아무것도 리턴하지 않는 함수는 쓸모 없다.

보라.

```scala
def useless_function_times_two(x: Int): Unit = {
    val useless_result = x * 2
} 
```

명백하게, 이 함수는 아무 쓸모도 없다. (이 경우에 이건 명백하지 않다. 왜냐하면 스칼라에 대해 모르기 때문이다. 함수는 이것의 결과를 리턴하지 않고 어떠한 외부 값도 변경하지 않는다.)



### 참조 투명성

또한, pure 함수는 오직 인자로써 함수에 넘겨진 인자에만 의존한다. 이것은 외부에서 안으로 어떤것에도 접근할 수 없다. 

한가지 중요한 이점이 있다. *참조 투명성* . 같은 인자를 가진 pure 함수를 부를때, 이것은 항상 같은 결과를 리턴한다.

이것은 코드에 대한 추론을 훨씬 쉽게 할 수 있다. 만약 각각의 함수에 대해 테스트 하고, 그것들이 동작하는것에 확신이 있다면, 서로 상호작용하는 그 함수들이 너에게 너가 예상하는 결과를 준다는 확신 역시 있어야 한다.

이어지는 impure 함수를 보라.

```scala
var value = 2
def value_times_two(): Int = value * 2 // Impure function - bad idea
```

만약 a) `value` 가 의존하는게 무엇인지 b) `value`의 값이 무엇인지 모른다면 이 함수가 무엇을 리턴할지 예측할 방법이 없다. 

이 예제가 약간 부자연스럽지만, 아마도 모든 노련한 프로그래머들은 이미  비슷한 상황에 놓인적이 있었을 것이다. 그리고 리턴 값이 어디서 오는지 궁금해 했을 것이다. 대부분의 함수는 위에 있는 것보다 약간 더 복잡하다.  만약 그 함수들이 외부 의존성을 가지고 있다면, 이러한 의존성을 변경하는 것은 절대 보이지 않는 결과를 초래할 수 있을 것이다.

아래 있는 것이 일반적으로 더 좋은 생각이다.

```scala
def times_two(x: Int): Int = x * 2
```

함수형 프로그래머는 이게 함수를 작성하는 유일한 올바른 방법이라고 말한다. 그리고 몇몇 함수형 프로그래밍 언어는 impure 함수를 작성하는것을 허용하지 않을 것이다. 너가 하드코어 함수형 프로그래머이든 아니든 간에, 참조 투명성은 항상 목표가 되어야 한다고 생각한다.



### 불변성

동시성은 pure 함수에 대한 다른 요구사항을 이끌었다. 함수에 입력값으로 전달된 변수들은 불변이어야만 한다. 그렇지 않으면 다른 스레드는 함수에 변수를 전달한 이후에 변수의 값을 변경할 수 있다. 그것은 참조투명성을 깨는 것이다.



