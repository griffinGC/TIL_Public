# 역할 & 협력 & 책임 관점에서의 객체 지향 설계

- 객체 지향 개발에서 가장 중요한 능력은 **책임을 능숙하게 소프트웨어 객체에 할당하는 것**
  - 이 능력이 설계의 전체적인 품질을 결정
  - 책임 구현은 그 다음 문제



## 협력

- 어떤 객체가 다른 객체에게 무엇인가를 요청하는 것
  - 객체들이 어플리케이션 기능을 구현하기 위해 수행하는 상호작용
- 객체 지향 세계에서 기능을 구현하는 유일한 방법
- 협력은 설계하기위한 문맥(context) 제공함으로써 객체의 행동방식 결정
- 객체의 행동과 상태 모두를 결정 
- 중요한 것은 개별 객체가 아니라 객체들 사이에 이루어 지는 협력
- 두 객체간의 협력은 메시지를 통해 이루어짐
  - 객체가 다른 객체에게 책임을 수행하도록 요청을 보내는 것을 메시지 전송이라고 함. 



## 역할

- 객체들이 협력안에서 수행하는 책임들(책임의 집합)을 일컫는 말
  - 동일한 협력을 수행하는 객체들을 추상화 할 수 있음
  - 어떤 글에서는 인터페이스로 의역하면 이해하기 쉽다고도 말함
- 협력내에서 다른 객체로 대체할 수 있음을 나타내는 일종의 표식
- 역할을 대체하기 위해서는 각 역할이 수신할 수 있는 메시지를 동일한 방식으로 이해해야 함
- 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있음
  - 객체지향 설계의 단순성, 유연성, 재사용성을 뒷받침하는 핵심 개념
- 역할의 대체 가능성은 행위 호환성을 의미하고, 행위 호환성은 동일한 책임의 수행을 의미



## 책임

- 객체 지향 설계의 **핵심**
- 객체가 협력에 참여하기 위해 수행하는 로직 
  - 인터페이스 구현체 또는 객체
  - 공용 인터페이스 구성
- 하는것과 아는 것으로 구분됨
  1. 하는 것
     - 객체를 생성하거나 계산을 수행하는등의 **스스로 하는 것**
     - 다른 객체의 행동을 **시작**시키는 것
     - 다른 객체의 활동을 **제어하고 조절**하는 것
  2. 아는 것
     - **개인적인 정보**에 관해 아는 것
     - **관련된 객체**에 관해 아는 것 (의존성)
     - 자신이 **유도**하거나 **계산**할 수 있는 것에 대해 아는 것
- 객체의 외부에 **제공해 줄 수 있는 정보**(아는것의 측면)와 외부에 **제공해 줄 수 있는 서비스**(하는것의 측면)의 목록
- 객체가 다른 객체에게 책임을 수행하도록 요청을 보내는 것을 메시지 전송이라고 함. 두 객체간의 협력은 메시지를 통해 이루어짐
- 여기서 더 나아가면 책임 주도 설계 (RDD)가 등장
  - 책임주도설계란 협력을 설계하기 위해서 책임에 초점을 맞추는 것



#### 위의 3가지를 이용하면 객체 지향 설계가 가능하다.



## 역할, 협력, 책임을 이용한 객체지향 설계 기법

### 책임 주도 설계

- 시스템의 책임을 객체의 책임으로 변환하고, 각 객체가 책임을 수행하는 중에 필요한 정보나 서비스를 제공해줄 협력자를 찾아 해당 협력자에게 책임을 할당하는 순차적인 방식으로 객체들의 협력 공동체를 구축한다.
- 책임주도 설계는 개별적인 객체의 상태가 아니라 객체의 책임과 상호작용에 집중한다.

### 디자인 패턴

- 책임주도 설계의 결과를 표현함
- 패턴은 모범이 되는 설계
- 특정 상황에 적용 가능한 디자인 패턴을 잘 알고 있다면 책임주도 설계의 절차를 순차적으로 따르지 않고도 시스템 안에 구현할 객체들의 역할과 책임, 협력 관계를 빠르고 손쉽게 포착할 수 있음

### 테스트 주도 개발

- 테스트주도 개발의 기본 흐름은 실패하는 테스트를 작성하고, 테스트를 통과하는 가장 간단한 코드를 작성한 후, 리팩토링을 통해 중복을 제거하는 것
- 테스트주도 개발은 객체가 이미 존재한다고 가정하고 객체에게 어떤 메시지를 전송할 것인지에 관해 먼저 생각하라고 충고한다. 그러나 이 같은 종류의 충고는 역할, 책임, 협력의 관점에서 객체를 바라보지 않을 경우 무의미하다.
- 테스트주도 개발은 테스트를 작성하는 것이 아니라 책임을 수행할 객체 또는 클라이언트가 기대하는 객체의 역할이 메시지를 수신할때 어떤 결과를 반환하고 그 과정을 어떤 객체와 협력할 것인지에 대한 기대를 코드의 형태로 작성하는 것이다.
- 테스트를 작성하기 위해 객체의 메서드를 호출하고 반환값을 검증하는 것은 순간적으로 객체가 수행해야 하는 책임에 관해 생각한 것이다. 테스트에 필요한 간접 입력 값을 제공하기 위한 *스텁(stub)을 추가하거나 간접 출력 값을 검증하기 위해 목 객체(mock object)를 사용하는 것은 객체와 협력해야 하는 협력자에 관해 고민한 결과를 코드로 표현한 것이다.

*스텁 - 다른 프로그래밍 기능을 대리하는 코드




## 참고자료

> [03. 역할, 책임, 협력](https://velog.io/@ljinsk3/03.-%EC%97%AD%ED%95%A0-%EC%B1%85%EC%9E%84-%ED%98%91%EB%A0%A5)
>
> [OOP 역할, 책임, 협력](https://o-o-wl.tistory.com/11)
>
> [(객체지향의 사실과 오해) 정리](https://jongmin92.github.io/2019/02/10/Programming/object_oriented_facts_and_misunderstandings/)
>
> [Objects Study - Chapter3. 역할, 책임, 협력](https://jaehun2841.github.io/2020/05/10/object-chapter3/#역할-책임-협력)
>
> [역할, 책임, 협력 slideshare](https://www.slideshare.net/baejjae93/roles-responsibilities-collaborations)
